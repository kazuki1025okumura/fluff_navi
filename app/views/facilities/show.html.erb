<div class="max-w-screen-md grid sm:grid-cols-2 mx-auto">
  <div class="sm:col-span-2 p-3.5 items-center text-center">
    <div class="container mx-auto mt-24 py-5 px-5 md:px-20">
      <h1 id="facility-title" class="mb-8 text-2xl font-light text-center text-black">
        <%= @facility.name %>
      </h1>
      <div class="flex max-auto justify-center mx-3">
        <% if logged_in? %>
          <%= render 'bookmark_button', { facility: @facility } %>
        <% else %>
          <%= render 'before_login_bookmark' %>
        <% end %>
        <%= link_to '写真を投稿する', new_facility_post_path(@facility), class: 'btn btn-info text-white', id: 'post-button' %>
      </div>
      <h2 class="mb-8 text-2xl font-light text-center text-black">
        <% @facility.categories.each do |category| %>
          <%= category.name %>
        <% end %>
      </h2>
      <table class="table-fixed mb-8 text-2xl font-light text-center text-black">
        <tbody>
          <tr>
            <td class="border px-4 py-2">施設紹介</td>
            <td class="border px-4 py-2"><%= @facility.description %></td>
          </tr>
          <tr>
            <td class="border px-4 py-2">定休日</td>
            <td class="border px-4 py-2"><%= @facility.close_day %></td>
          </tr>
          <tr>
            <td class="border px-4 py-2">営業時間</td>
            <td class="border px-4 py-2"><%= @facility.opening_hours %></td>
          </tr>
          <tr>
            <td class="border px-4 py-2">電話番号</td>
            <td class="border px-4 py-2"><%= @facility.tel_number %></td>
          </tr>
          <tr>
            <td class="border px-4 py-2">住所</td>
            <td class="border px-4 py-2"><%= @facility.address %></td>
          </tr>
          
          <tr>
            <td class="border px-4 py-2">料金</td>
            <% if @facility.price.present? %>
              <td class="border px-4 py-2"><%= @facility.price %></td>
            <% else %>
              <td class="border px-4 py-2">ホームページをご覧になるか施設へお問合せください</td>
            <% end %>
          </tr>
          <tr>
            <td class="border px-4 py-2">ホームページ</td>
            <td class="border px-4 py-2"><%= @facility.web_site %></td>
          </tr>
          <% if @facility.remarks.present? %>
          <tr>
            <td class="border px-4 py-2">備考</td>
            <td class="border px-4 py-2"><%= @facility.remarks %></td>
          </tr>
          <% end %>
          <tr>
            <td class="border px-4 py-2">動物</td>
            <td class="border px-4 py-2">
              <% @facility.animals.each do |animal| %>
                <%= animal.name %>
              <% end %>
            </td>
          </tr>
        </tbody>
      </table>
      <div id="map" class="mx-auto justify-center"></div>
      <%= render 'shared/posts', posts: @facility.posts %>
    </div>
  </div>
</div>

<style>
  #map {
    height: 500px;
    width: 100%;
  }
</style>

<script>
  function initMap() {
    const myFacility = { lat: gon.facility.latitude, lng: gon.facility.longitude }
    const map = new google.maps.Map(document.getElementById("map"), {
      center: myFacility,
      zoom: 15,
    })
    const marker = new google.maps.Marker({
      position: myFacility,
      map: map,
    })
  }
  window.initMap = initMap;
</script>

<script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_MAP_API_KEY'] %>&callback=initMap" async defer></script>
